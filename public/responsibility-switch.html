<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Responsibility Switch — Richiesta</title>
  <meta name="theme-color" content="#0b0f16"/>
  <style>
    :root{--bg:#0b0f16;--panel:#101724;--line:#1f2b46;--muted:#a9b4c6;--brand:#37c9ff;--brand2:#8a6dff;color-scheme:dark}
    *{box-sizing:border-box} body{margin:0;background:var(--bg);color:#e9eef5;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
    .wrap{max-width:940px;margin:0 auto;padding:24px}
    .card{background:#101724;border:1px solid var(--line);border-radius:16px;padding:16px;margin:12px 0}
    h1{margin:0 0 8px} .muted{color:var(--muted)}
    label{display:block;margin:10px 0 6px;color:#cfd8ea}
    input,select,textarea{width:100%;padding:12px;border-radius:12px;border:1px solid #273251;background:#0c101b;color:#e9eef5}
    textarea{min-height:120px;resize:vertical}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .row>*{flex:1 1 260px}
    .actions{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:12px}
    .btn{padding:12px 16px;border-radius:12px;border:0;background:#1b2a46;color:#fff;text-decoration:none;cursor:pointer}
    .btn.primary{background:linear-gradient(135deg,var(--brand),var(--brand2));color:#061018;font-weight:800}
    .note{font-size:.9rem;color:#9fb0c9}
    .ok{color:#28d381}.err{color:#ff6b6b}
    a{color:#9bd0ff;text-decoration:none}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Responsibility Switch — Richiesta</h1>
    <p class="muted">Genera un link personale da inviare al destinatario: la pagina mostrerà la tua scusa e le opzioni di rimedio (richiamami, riprogramma, rimborso, ecc.).</p>

    <div class="card">
      <h2 style="margin:0 0 8px">Dati per la richiesta</h2>
      <div class="row">
        <div>
          <label>La tua email (per conferma)</label>
          <input id="email" type="email" placeholder="tu@esempio.it" autocomplete="email">
        </div>
        <div>
          <label>Contesto</label>
          <select id="context">
            <option>CENA</option><option>APERITIVO</option><option>EVENTO</option><option>LAVORO</option>
            <option>PARTITA A CALCETTO</option><option>FAMIGLIA</option><option>SALUTE</option>
            <option>APPUNTAMENTO/CONSEGNA</option><option>ESAME/LEZIONE</option>
          </select>
        </div>
      </div>

      <label>Testo (opz.) — come vuoi “impostare” lo switch</label>
      <textarea id="brief" placeholder="Es. Vorrei dare tre opzioni: 1) sposto a domani sera; 2) videochiamata di 10' domani mattina; 3) rimborso voucher."></textarea>

      <div class="row">
        <div>
          <label>Scadenza link (opz.)</label>
          <select id="expires">
            <option value="">Nessuna</option>
            <option>24 ore</option>
            <option>3 giorni</option>
            <option>7 giorni</option>
          </select>
        </div>
        <div>
          <label>Richiedi prova di consegna</label>
          <select id="pod">
            <option>Sì</option>
            <option>No</option>
          </select>
        </div>
      </div>

      <label class="note" style="display:flex;gap:8px;align-items:center;margin-top:12px">
        <input id="consent" type="checkbox" style="width:auto"> 
        Dichiaro di aver letto e accettato la <a href="/manleva-switch.html" target="_blank" rel="noopener">manleva del Responsibility Switch</a>.
      </label>

      <div class="actions">
        <button class="btn primary" id="send">Richiedi il tuo Responsibility Switch</button>
        <a class="btn" href="/#catalogo">Torna al catalogo</a>
        <span id="msg" class="note"></span>
      </div>
    </div>

    <div class="card">
      <h3 style="margin:0 0 6px">Come funziona</h3>
      <ol class="note" style="margin:0 0 0 18px;line-height:1.7">
        <li>Compili e invii la richiesta.</li>
        <li>Ricevi via email il link del tuo Switch.</li>
        <li>Inoltra quel link al destinatario (tu decidi su quale canale).</li>
        <li>Ogni scelta effettuata dal destinatario ti arriva come notifica + report.</li>
      </ol>
    </div>
  </div>

  <script>
    // Versione “zero backend”: apre un’email precompilata con i dati.
    // Se in futuro vuoi un serverless, sostituisci con fetch('/.netlify/functions/rs-request', { ... }).
    const btn = document.getElementById('send');
    const msg = document.getElementById('msg');
    btn.addEventListener('click', ()=>{
      msg.textContent = '';
      const email = (document.getElementById('email').value||'').trim();
      const context = document.getElementById('context').value;
      const brief = (document.getElementById('brief').value||'').trim();
      const expires = document.getElementById('expires').value;
      const pod = document.getElementById('pod').value;
      const ok = document.getElementById('consent').checked;

      if(!email){ msg.textContent='Inserisci una email.'; msg.className='note err'; return; }
      if(!ok){ msg.textContent='Devi accettare la manleva.'; msg.className='note err'; return; }

      const to   = 'colpamiaconsulenze@proton.me';
      const subj = encodeURIComponent('Richiesta Responsibility Switch');
      const body = encodeURIComponent(
`Email: ${email}
Contesto: ${context}
Scadenza: ${expires||'—'}
Prova di consegna: ${pod}

Brief:
${brief||'—'}

Confermo di aver accettato la manleva del Responsibility Switch.`
      );
      location.href = `mailto:${to}?subject=${subj}&body=${body}`;
      msg.textContent='Si sta aprendo il client email…'; msg.className='note ok';
    });
  </script>
</body>
</html>
